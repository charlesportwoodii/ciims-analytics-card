(function(){new CardPrototype({name:"AnalyticsCard",version:"",init:function(){$.getScript("https://cdnjs.cloudflare.com/ajax/libs/Chart.js/1.0.1/Chart.min.js"),$.getScript("https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js")},preload:function(){},render:function(){var t=this;$.ajax({url:$("#endpoint").attr("data-attr-endpoint")+"/api/event/pageviews",type:"GET",headers:CiiMSDashboard.getRequestHeaders(),success:function(n){var i=0,a=0,e=[],r=n.response.sort(function(t,n){return n.count-t.count});$.each(r,function(){if(!t.contains(this.uri,"/dashboard")&&!t.contains(this.uri,"/cloud")&&!t.contains(this.uri,"/login")){if(a>=15)return;var n=d3.scale.category20().range()[a];e.push({value:parseInt(this.count),label:this.uri,color:n,highlight:n}),i+=parseInt(this.count),a++}});var o=$("#"+t.id+" .analyticsdonutchart").get("0").getContext("2d");new Chart(o).Doughnut(e,{animationEasing:"easeOutCubic"}),$("#"+t.id+" .pageviews-container .count").text(i)}})},reload:function(){},contains:function(t,n){return-1!=t.indexOf(n)}})})(this);